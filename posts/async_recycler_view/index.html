<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android | Personal Blog - NSA</title><meta name=keywords content="RecyclerView,Thread,Cache memory,LruCache">
<meta name=description content="What is the goal? In the last post, I demonstrated how to create a RecyclerView and load data from the external API, particularly we used the Picasso library to load and cache images for us. In this post, I will show how to manually do that without the use of any libraries. To not repeat myself, in this article I will just post the code for newly added classes and code where changes were made, the rest of the code is the same as previous post.">
<meta name=author content="NSA">
<link rel=canonical href=https://akrvs21.github.io/posts/async_recycler_view/>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.e1e11284e10a5dcdfbe9d1f0b4ad9c99f091c22c076480f97937891448149483.css integrity="sha256-4eEShOEKXc376dHwtK2cmfCRwiwHZID5eTeJFEgUlIM=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://akrvs21.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=16x16 href=https://akrvs21.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=https://akrvs21.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=apple-touch-icon href=https://akrvs21.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://akrvs21.github.io/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android">
<meta property="og:description" content="What is the goal? In the last post, I demonstrated how to create a RecyclerView and load data from the external API, particularly we used the Picasso library to load and cache images for us. In this post, I will show how to manually do that without the use of any libraries. To not repeat myself, in this article I will just post the code for newly added classes and code where changes were made, the rest of the code is the same as previous post.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://akrvs21.github.io/posts/async_recycler_view/">
<meta property="og:image" content="https://akrvs21.github.io/%3Cimage%20path/url%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-04-15T00:00:00+00:00">
<meta property="article:modified_time" content="2022-04-15T00:00:00+00:00"><meta property="og:site_name" content="Personal Blog - NSA">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://akrvs21.github.io/%3Cimage%20path/url%3E">
<meta name=twitter:title content="How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android">
<meta name=twitter:description content="What is the goal? In the last post, I demonstrated how to create a RecyclerView and load data from the external API, particularly we used the Picasso library to load and cache images for us. In this post, I will show how to manually do that without the use of any libraries. To not repeat myself, in this article I will just post the code for newly added classes and code where changes were made, the rest of the code is the same as previous post.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://akrvs21.github.io/posts/"},{"@type":"ListItem","position":2,"name":"How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android","item":"https://akrvs21.github.io/posts/async_recycler_view/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android","name":"How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android","description":"What is the goal? In the last post, I demonstrated how to create a RecyclerView and load data from the external API, particularly we used the Picasso library to load and cache images for us. In this post, I will show how to manually do that without the use of any libraries. To not repeat myself, in this article I will just post the code for newly added classes and code where changes were made, the rest of the code is the same as previous post.","keywords":["RecyclerView","Thread","Cache memory","LruCache"],"articleBody":"What is the goal? In the last post, I demonstrated how to create a RecyclerView and load data from the external API, particularly we used the Picasso library to load and cache images for us. In this post, I will show how to manually do that without the use of any libraries. To not repeat myself, in this article I will just post the code for newly added classes and code where changes were made, the rest of the code is the same as previous post. The full code can be downloaded at the bottom of this page. We will learn how to create new threads in Java and how to cache bitmap for memory optimization.\nConcurrency and Parallelism in Android I will briefly explain the main purpose and methods here and in the next post, I will go in-depth about these two topics. Concurrent apps use multiple threads to simultaneously run computations that often interact with each other. Parallelism is similar to concurrency but tries to have little or no interaction between threads. Thread - is a single sequential flow of control within a program, it usually lives within a process and each of these threads is responsible for executing a specific task, hence the program can execute simultaneously multiple tasks without overloading the main thread. The main thread - in the android context usually refers to the UI thread, all computations and user interaction with UI by default happens in this thread, so it is important to not overload this thread with heavy tasks which can lead to unresponsiveness in your app. From Android developers documentation:\n When your app performs intensive work in response to user interaction, this single thread model can yield poor performance unless you implement your application properly. Specifically, if everything is happening in the UI thread, performing long operations such as network access or database queries will block the whole UI. When the thread is blocked, no events can be dispatched, including drawing events. From the user’s perspective, the application appears to hang. Even worse, if the UI thread is blocked for more than a few seconds (about 5 seconds currently) the user is presented with the infamous “application not responding” (ANR) dialog. The user might then decide to quit your application and uninstall it if they are unhappy Additionally, the Android UI toolkit is not thread-safe. So, you must not manipulate your UI from a worker thread—you must do all manipulation to your user interface from the UI thread. Thus, there are simply two rules to Android’s single thread model:\n Do not block the UI thread Do not access the Android UI toolkit from outside the UI thread   In our case, making a network request is a heavy task and needs to be done on a new Thread.\nCaching in Android Caching is an important concept in web development, it significantly improves user experience. In our case, after the first network request, when we get the images, we need to cache them inside the memory, so next time when we need to access them again, we can just load them from memory rather than making a new API call. To store an image we need to convert it into a bitmap and there are two types of caching a bitmap in Android:\n  Using Memory Cache (LruCache)\nLruCache class is similar to the HashMap data structure, in that it stores key-value pairs. The main advantage of it is that it’s faster to access this cache. The cons are, that it’s volatile memory, so every time cache gets destroyed when the app goes background or gets closed, and this cache takes up your application memory, which is limited so it’s not recommended to store huge data.\n  Using Disk Cache (DiskLruCache)\nDiskLruCache is slower than the memory cache, but the main advantage is that we can store larger data and that its non-volatile memory means that we won’t lose any data if the application exits or when it goes to the background.\n  In our case, I’ve used Memory cache for caching the images.\nCreate a Memory Cache All explanations provided in comments:\npublic class MainActivity extends AppCompatActivity {  RecyclerView recyclerView;  ArrayListUser users;  private static final String TAG = \"MainActivity\";  private LruCacheString, Bitmap memoryCache; // create LruCache to store bitmap values   @Override  protected void onCreate(Bundle savedInstanceState) {  super.onCreate(savedInstanceState);  setContentView(R.layout.activity_main);  recyclerView = findViewById(R.id.mRecyclerView);  Context context = this;   initCache(); // initialize cache when activity gets created   Retrofit retrofit = new Retrofit.Builder()  .baseUrl(\"https://dummyapi.io/data/v1/\")  .addConverterFactory(GsonConverterFactory.create())  .build();   CallAPI callAPI = retrofit.create(CallAPI.class);   CallUserWrapper call = callAPI.getUsers();   // asynchronously makes network request  call.enqueue(new CallbackUserWrapper() {  @Override  public void onResponse(CallUserWrapper call, ResponseUserWrapper response) {  if(!response.isSuccessful()) {  Toast.makeText(MainActivity.this, response.code(), Toast.LENGTH_SHORT).show();  return;  }  Log.d(TAG, String.valueOf(response.body().getUsers().get(0).getFirstName()));  // Get the data to display  users = response.body().getUsers();  // pass memoryCache to adapter  RecyclerViewAdapter recyclerViewAdapter = new RecyclerViewAdapter(context, users, memoryCache);  recyclerView.setAdapter(recyclerViewAdapter);  recyclerView.setLayoutManager(new LinearLayoutManager(context));  }   @Override  public void onFailure(CallUserWrapper call, Throwable t) {  Toast.makeText(MainActivity.this, t + \"\", Toast.LENGTH_SHORT).show();  }  });  }   public void initCache() {  // Get max available VM memory, exceeding this amount will throw an  // OutOfMemory exception. Stored in kilobytes as LruCache takes an  // int in its constructor.  final int maxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024);   // Use 1/8th of the available memory for this memory cache.  final int cacheSize = maxMemory / 8;   memoryCache = new LruCacheString, Bitmap(cacheSize) {  @Override  protected int sizeOf(String key, Bitmap bitmap) {  // The cache size will be measured in kilobytes rather than  // number of items.  return bitmap.getByteCount() / 1024;  }  };  } } RecyclerViewAdapter.java\npublic class RecyclerViewAdapter extends RecyclerView.AdapterRecyclerViewAdapter.MyViewHolder {  Context context;  ArrayListUser users = new ArrayList();  Bitmap userBitmap;  private LruCacheString, Bitmap memoryCache;   public RecyclerViewAdapter(Context context, ArrayListUser users, LruCacheString, Bitmap memoryCache) {  this.context = context;  // This is array that contains the list of object,  // each object is type of User.  this.users = users;  this.memoryCache = memoryCache;  }   @NonNull  @Override  public RecyclerViewAdapter.MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {  // In onCreateViewHolder we inflate the layout and give a look to each of our rows  // as you can see, we referencing custom_row.xml, from the Step #1, in inflate method  View view = LayoutInflater.from(context).inflate(R.layout.custom_row, parent, false);   return new RecyclerViewAdapter.MyViewHolder(view);  }  @SuppressLint(\"SetTextI18n\")  @Override  public void onBindViewHolder(@NonNull RecyclerViewAdapter.MyViewHolder holder, @SuppressLint(\"RecyclerView\") int position) {  Log.d(\"onBindViewHolder\", String.valueOf(Thread.currentThread().getName()));   ProcessImage processImageObject = new ProcessImage(users.get(position).getUserImage());  // For each item in RecyclerView, create a new Thread  // to separately make a network request  Thread newThread = new Thread(new Runnable() {  @Override  public void run() {  Log.d(\"myThread\", String.valueOf(Thread.currentThread().getName()));   userBitmap = processImageObject.getBitmapFromURL(processImageObject.getImageUrl(), memoryCache, position);  }  });  newThread.start();  try {  Log.d(\"checkThread\", String.valueOf(Looper.myLooper() == Looper.getMainLooper()));  /* * It's synchronization mechanism, to ensure that we get bitmap first * before setting it to ImageView. join()-method, when invoked, calling * thread goes to waiting state(in this case main thread goes to waiting * state). It remains in a waiting state until * the referenced thread terminates. */  newThread.join();  } catch (InterruptedException e) {  e.printStackTrace();  }   holder.userImage.setImageBitmap(userBitmap);  holder.userFullName.setText(users.get(position).getTitle() + \". \" + users.get(position).getFirstName() + \" \" + users.get(position).getLastName()); // Setting text to TextView  holder.userId.setText(\"My ID: \" + users.get(position).getUserId());  }   @Override  public int getItemCount() {  // RecyclerView wants to know the count of items in the list  return this.users.size();  }   public static class MyViewHolder extends RecyclerView.ViewHolder {  // grabbing views from our custom_row layout file,  // similar what we normally do in onCreate method  ImageView userImage;  TextView userFullName;  TextView userId;   public MyViewHolder(@NonNull View itemView) {  super(itemView);  userImage = itemView.findViewById(R.id.userImage);  userFullName = itemView.findViewById(R.id.fullNameText);  userId = itemView.findViewById(R.id.userId);  }  } } ProcessImage.java\n// This class is responsible for processing an image, // converting from url to bitmap and storing it to the local cache public class ProcessImage {  String imageUrl;  int key;  private LruCacheString, Bitmap memoryCache;   public ProcessImage(String imageUrl) {  this.imageUrl = imageUrl;  }   public String getImageUrl() {  return imageUrl;  }   // This function takes image url and converts it to bitmap,  // after that it stores it to the cache in key-value pair format,  // with a key being the item position in recyclerView  public Bitmap getBitmapFromURL(String src, LruCacheString, Bitmap memoryCache, int key) {  try {  CacheImages cacheImage = new CacheImages(memoryCache, key);  // Retrieves the cache by providing the key value.  Bitmap myBitmap = cacheImage.getBitmapFromMemCache(String.valueOf(cacheImage.getKey()));   if(myBitmap != null) {  Log.d(\"cached\", \"Got the cached content\");  // if the cache is not null, return the cache content  return myBitmap;  } else {  // if the cache for that key is null, get the image from server,  // convert to bitmap and return it.  // Credits to @silentnuke: https://stackoverflow.com/a/8993175/7686275  URL url = new URL(src);  HttpURLConnection connection = (HttpURLConnection) url.openConnection();  connection.setDoInput(true);  connection.connect();  InputStream input = connection.getInputStream();  myBitmap = BitmapFactory.decodeStream(input);  cacheImage.addBitmapToMemoryCache(String.valueOf(cacheImage.getKey()), myBitmap);   return myBitmap;  }  } catch (IOException e) {  // Log exception  return null;  }  } } CacheImages.java\n// This class is responsible for caching public class CacheImages {  private LruCacheString, Bitmap memoryCache;  int key;   public LruCacheString, Bitmap getMemoryCache() {  return memoryCache;  }   public int getKey() {  return key;  }   public CacheImages(LruCacheString, Bitmap memoryCache, int key) {  this.memoryCache = memoryCache;  this.key = key;  }   public void addBitmapToMemoryCache(String key, Bitmap bitmap) {  // if bitmap doesn't exist in cache, store that bitmap to cache  if (getBitmapFromMemCache(key) == null) {  memoryCache.put(key, bitmap);  }  }  public Bitmap getBitmapFromMemCache(String key) {  return memoryCache.get(key);  } } FULL CODE\n","wordCount":"1521","inLanguage":"en","image":"https://akrvs21.github.io/%3Cimage%20path/url%3E","datePublished":"2022-04-15T00:00:00Z","dateModified":"2022-04-15T00:00:00Z","author":{"@type":"Person","name":"NSA"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://akrvs21.github.io/posts/async_recycler_view/"},"publisher":{"@type":"Organization","name":"Personal Blog - NSA","logo":{"@type":"ImageObject","url":"https://akrvs21.github.io/%3Clink%20/%20abs%20url%3E"}}}</script>
</head><body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://akrvs21.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div><ul id=menu>
</ul></nav></header><main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://akrvs21.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://akrvs21.github.io/posts/>Posts</a></div><h1 class=post-title>
How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android
</h1><div class=post-meta><span title="2022-04-15 00:00:00 +0000 UTC">April 15, 2022</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;NSA&nbsp;|&nbsp;<a href=https://github.com/akrvs21/akrvs21.github.io/blob/main/posts/async_recycler_view/index.html/posts/async_recycler_view.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div></header><div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#what-is-the-goal aria-label="What is the goal?">What is the goal?</a></li><li>
<a href=#concurrency-and-parallelism-in-android aria-label="Concurrency and Parallelism in Android">Concurrency and Parallelism in Android</a></li><li>
<a href=#caching-in-android aria-label="Caching in Android">Caching in Android</a></li><li>
<a href=#create-a-memory-cache aria-label="Create a Memory Cache">Create a Memory Cache</a>
</li></ul></div></details>
</div><div class=post-content><h3 id=what-is-the-goal>What is the goal?<a hidden class=anchor aria-hidden=true href=#what-is-the-goal>#</a></h3><p>In the <a href=https://akrvs21.github.io/posts/recyclerview/>last post</a>, I demonstrated how to create a RecyclerView and load data from the external API, particularly we used the <code>Picasso</code> library to load and cache images for us. In this post, I will show how to manually do that without the use of any libraries. To not repeat myself, in this article I will just post the code for newly added classes and code where changes were made, the rest of the code is the same as <a href=https://akrvs21.github.io/posts/recyclerview/>previous post</a>. The full code can be downloaded at the bottom of this page. We will learn how to create new threads in Java and how to cache bitmap for memory optimization.</p><h3 id=concurrency-and-parallelism-in-android>Concurrency and Parallelism in Android<a hidden class=anchor aria-hidden=true href=#concurrency-and-parallelism-in-android>#</a></h3><p>I will briefly explain the main purpose and methods here and in the next post, I will go in-depth about these two topics. Concurrent apps use multiple threads to simultaneously run computations that often interact with each other. Parallelism is similar to concurrency but tries to have little or no interaction between threads. Thread - is a single sequential flow of control within a program, it usually lives within a process and each of these threads is responsible for executing a specific task, hence the program can execute simultaneously multiple tasks without overloading the main thread. The main thread - in the android context usually refers to the UI thread, all computations and user interaction with UI by default happens in this thread, so it is important to not overload this thread with heavy tasks which can lead to unresponsiveness in your app. From <a href="https://developer.android.com/guide/components/processes-and-threads#:~:text=When%20your%20app%20performs,outside%20the%20UI%20thread">Android developers documentation:</a></p><blockquote>
<p>When your app performs intensive work in response to user interaction, this single thread model can yield poor performance unless you implement your application properly. Specifically, if everything is happening in the UI thread, performing long operations such as network access or database queries will block the whole UI. When the thread is blocked, no events can be dispatched, including drawing events. From the user&rsquo;s perspective, the application appears to hang. Even worse, if the UI thread is blocked for more than a few seconds (about 5 seconds currently) the user is presented with the infamous &ldquo;application not responding&rdquo; (ANR) dialog. The user might then decide to quit your application and uninstall it if they are unhappy Additionally, the Android UI toolkit is not thread-safe. So, you must not manipulate your UI from a worker thread—you must do all manipulation to your user interface from the UI thread. Thus, there are simply two rules to Android&rsquo;s single thread model:</p><ol>
<li>Do not block the UI thread</li><li>Do not access the Android UI toolkit from outside the UI thread</li></ol></blockquote><p>In our case, making a network request is a heavy task and needs to be done on a new <code>Thread</code>.</p><h3 id=caching-in-android>Caching in Android<a hidden class=anchor aria-hidden=true href=#caching-in-android>#</a></h3><p>Caching is an important concept in web development, it significantly improves user experience. In our case, after the first network request, when we get the images, we need to cache them inside the memory, so next time when we need to access them again, we can just load them from memory rather than making a new <code>API call</code>. To store an image we need to convert it into a bitmap and there are two types of caching a bitmap in Android:</p><ol>
<li>
<p>Using Memory Cache (<a href=https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/util/LruCache.java>LruCache</a>)<br>
<code>LruCache</code> class is similar to the <code>HashMap</code> data structure, in that it stores key-value pairs. The main advantage of it is that it&rsquo;s faster to access this cache. The cons are, that it&rsquo;s volatile memory, so every time cache gets destroyed when the app goes background or gets closed, and this cache takes up your application memory, which is <a href=https://stackoverflow.com/a/15763477/7686275>limited</a> so it&rsquo;s not recommended to store huge data.</p></li><li>
<p>Using Disk Cache (<a href=https://android.googlesource.com/platform/libcore/+/jb-mr2-release/luni/src/main/java/libcore/io/DiskLruCache.java>DiskLruCache</a>)<br>
<code>DiskLruCache</code> is slower than the memory cache, but the main advantage is that we can store larger data and that its non-volatile memory means that we won&rsquo;t lose any data if the application exits or when it goes to the background.</p></li></ol><p>In our case, I&rsquo;ve used <em><strong>Memory cache</strong></em> for caching the images.</p><h3 id=create-a-memory-cache>Create a Memory Cache<a hidden class=anchor aria-hidden=true href=#create-a-memory-cache>#</a></h3><p>All explanations provided in comments:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MainActivity</span> <span style=color:#66d9ef>extends</span> AppCompatActivity <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    RecyclerView recyclerView<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    ArrayList<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> users<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String TAG <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;MainActivity&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;</span> memoryCache<span style=color:#f92672>;</span> <span style=color:#75715e>// create LruCache to store bitmap values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>Bundle savedInstanceState<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>savedInstanceState<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        setContentView<span style=color:#f92672>(</span>R<span style=color:#f92672>.</span><span style=color:#a6e22e>layout</span><span style=color:#f92672>.</span><span style=color:#a6e22e>activity_main</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        recyclerView <span style=color:#f92672>=</span> findViewById<span style=color:#f92672>(</span>R<span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>.</span><span style=color:#a6e22e>mRecyclerView</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Context context <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        initCache<span style=color:#f92672>();</span> <span style=color:#75715e>// initialize cache when activity gets created
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        Retrofit retrofit <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Retrofit<span style=color:#f92672>.</span><span style=color:#a6e22e>Builder</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>baseUrl</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;https://dummyapi.io/data/v1/&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>addConverterFactory</span><span style=color:#f92672>(</span>GsonConverterFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        CallAPI callAPI <span style=color:#f92672>=</span> retrofit<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span>CallAPI<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Call<span style=color:#f92672>&lt;</span>UserWrapper<span style=color:#f92672>&gt;</span> call <span style=color:#f92672>=</span> callAPI<span style=color:#f92672>.</span><span style=color:#a6e22e>getUsers</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// asynchronously makes network request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        call<span style=color:#f92672>.</span><span style=color:#a6e22e>enqueue</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Callback<span style=color:#f92672>&lt;</span>UserWrapper<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onResponse</span><span style=color:#f92672>(</span>Call<span style=color:#f92672>&lt;</span>UserWrapper<span style=color:#f92672>&gt;</span> call<span style=color:#f92672>,</span> Response<span style=color:#f92672>&lt;</span>UserWrapper<span style=color:#f92672>&gt;</span> response<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span><span style=color:#f92672>(!</span>response<span style=color:#f92672>.</span><span style=color:#a6e22e>isSuccessful</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    Toast<span style=color:#f92672>.</span><span style=color:#a6e22e>makeText</span><span style=color:#f92672>(</span>MainActivity<span style=color:#f92672>.</span><span style=color:#a6e22e>this</span><span style=color:#f92672>,</span> response<span style=color:#f92672>.</span><span style=color:#a6e22e>code</span><span style=color:#f92672>(),</span> Toast<span style=color:#f92672>.</span><span style=color:#a6e22e>LENGTH_SHORT</span><span style=color:#f92672>).</span><span style=color:#a6e22e>show</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                Log<span style=color:#f92672>.</span><span style=color:#a6e22e>d</span><span style=color:#f92672>(</span>TAG<span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>response<span style=color:#f92672>.</span><span style=color:#a6e22e>body</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getUsers</span><span style=color:#f92672>().</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>).</span><span style=color:#a6e22e>getFirstName</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Get the data to display
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                users <span style=color:#f92672>=</span> response<span style=color:#f92672>.</span><span style=color:#a6e22e>body</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getUsers</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// pass memoryCache to adapter
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                RecyclerViewAdapter recyclerViewAdapter <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RecyclerViewAdapter<span style=color:#f92672>(</span>context<span style=color:#f92672>,</span> users<span style=color:#f92672>,</span> memoryCache<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>                recyclerView<span style=color:#f92672>.</span><span style=color:#a6e22e>setAdapter</span><span style=color:#f92672>(</span>recyclerViewAdapter<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                recyclerView<span style=color:#f92672>.</span><span style=color:#a6e22e>setLayoutManager</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> LinearLayoutManager<span style=color:#f92672>(</span>context<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onFailure</span><span style=color:#f92672>(</span>Call<span style=color:#f92672>&lt;</span>UserWrapper<span style=color:#f92672>&gt;</span> call<span style=color:#f92672>,</span> Throwable t<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                Toast<span style=color:#f92672>.</span><span style=color:#a6e22e>makeText</span><span style=color:#f92672>(</span>MainActivity<span style=color:#f92672>.</span><span style=color:#a6e22e>this</span><span style=color:#f92672>,</span> t <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>,</span> Toast<span style=color:#f92672>.</span><span style=color:#a6e22e>LENGTH_SHORT</span><span style=color:#f92672>).</span><span style=color:#a6e22e>show</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>initCache</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Get max available VM memory, exceeding this amount will throw an
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// OutOfMemory exception. Stored in kilobytes as LruCache takes an
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// int in its constructor.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> maxMemory <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>maxMemory</span><span style=color:#f92672>()</span> <span style=color:#f92672>/</span> 1024<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Use 1/8th of the available memory for this memory cache.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> cacheSize <span style=color:#f92672>=</span> maxMemory <span style=color:#f92672>/</span> 8<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        memoryCache <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;(</span>cacheSize<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>sizeOf</span><span style=color:#f92672>(</span>String key<span style=color:#f92672>,</span> Bitmap bitmap<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// The cache size will be measured in kilobytes rather than
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#75715e>// number of items.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>return</span> bitmap<span style=color:#f92672>.</span><span style=color:#a6e22e>getByteCount</span><span style=color:#f92672>()</span> <span style=color:#f92672>/</span> 1024<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><em><strong>RecyclerViewAdapter.java</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RecyclerViewAdapter</span> <span style=color:#66d9ef>extends</span> RecyclerView<span style=color:#f92672>.</span><span style=color:#a6e22e>Adapter</span><span style=color:#f92672>&lt;</span>RecyclerViewAdapter<span style=color:#f92672>.</span><span style=color:#a6e22e>MyViewHolder</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Context context<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    ArrayList<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> users <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
</span></span><span style=display:flex><span>    Bitmap userBitmap<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;</span> memoryCache<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>RecyclerViewAdapter</span><span style=color:#f92672>(</span>Context context<span style=color:#f92672>,</span> ArrayList<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> users<span style=color:#f92672>,</span> LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;</span> memoryCache<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>context</span> <span style=color:#f92672>=</span> context<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This is array that contains the list of object,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// each object is type of User.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>users</span> <span style=color:#f92672>=</span> users<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>memoryCache</span> <span style=color:#f92672>=</span> memoryCache<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NonNull</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> RecyclerViewAdapter<span style=color:#f92672>.</span><span style=color:#a6e22e>MyViewHolder</span> <span style=color:#a6e22e>onCreateViewHolder</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@NonNull</span> ViewGroup parent<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> viewType<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// In onCreateViewHolder we inflate the layout and give a look to each of our rows
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// as you can see, we referencing custom_row.xml, from the Step #1, in inflate method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        View view <span style=color:#f92672>=</span> LayoutInflater<span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>context<span style=color:#f92672>).</span><span style=color:#a6e22e>inflate</span><span style=color:#f92672>(</span>R<span style=color:#f92672>.</span><span style=color:#a6e22e>layout</span><span style=color:#f92672>.</span><span style=color:#a6e22e>custom_row</span><span style=color:#f92672>,</span> parent<span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> RecyclerViewAdapter<span style=color:#f92672>.</span><span style=color:#a6e22e>MyViewHolder</span><span style=color:#f92672>(</span>view<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SuppressLint</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;SetTextI18n&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onBindViewHolder</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@NonNull</span> RecyclerViewAdapter<span style=color:#f92672>.</span><span style=color:#a6e22e>MyViewHolder</span> holder<span style=color:#f92672>,</span> <span style=color:#a6e22e>@SuppressLint</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;RecyclerView&#34;</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>int</span> position<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>d</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;onBindViewHolder&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ProcessImage processImageObject <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ProcessImage<span style=color:#f92672>(</span>users<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>position<span style=color:#f92672>).</span><span style=color:#a6e22e>getUserImage</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// For each item in RecyclerView, create a new Thread 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// to separately make a network request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        Thread newThread <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Runnable<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                Log<span style=color:#f92672>.</span><span style=color:#a6e22e>d</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;myThread&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                userBitmap <span style=color:#f92672>=</span> processImageObject<span style=color:#f92672>.</span><span style=color:#a6e22e>getBitmapFromURL</span><span style=color:#f92672>(</span>processImageObject<span style=color:#f92672>.</span><span style=color:#a6e22e>getImageUrl</span><span style=color:#f92672>(),</span> memoryCache<span style=color:#f92672>,</span> position<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>        newThread<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            Log<span style=color:#f92672>.</span><span style=color:#a6e22e>d</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;checkThread&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>Looper<span style=color:#f92672>.</span><span style=color:#a6e22e>myLooper</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> Looper<span style=color:#f92672>.</span><span style=color:#a6e22e>getMainLooper</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>            * It&#39;s synchronization mechanism, to ensure that we get bitmap first 
</span></span></span><span style=display:flex><span><span style=color:#75715e>            * before setting it to ImageView. join()-method, when invoked, calling 
</span></span></span><span style=display:flex><span><span style=color:#75715e>            * thread goes to waiting state(in this case main thread goes to waiting 
</span></span></span><span style=display:flex><span><span style=color:#75715e>            * state). It remains in a waiting state until 
</span></span></span><span style=display:flex><span><span style=color:#75715e>            * the referenced thread terminates.
</span></span></span><span style=display:flex><span><span style=color:#75715e>            */</span>
</span></span><span style=display:flex><span>            newThread<span style=color:#f92672>.</span><span style=color:#a6e22e>join</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        holder<span style=color:#f92672>.</span><span style=color:#a6e22e>userImage</span><span style=color:#f92672>.</span><span style=color:#a6e22e>setImageBitmap</span><span style=color:#f92672>(</span>userBitmap<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        holder<span style=color:#f92672>.</span><span style=color:#a6e22e>userFullName</span><span style=color:#f92672>.</span><span style=color:#a6e22e>setText</span><span style=color:#f92672>(</span>users<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>position<span style=color:#f92672>).</span><span style=color:#a6e22e>getTitle</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;. &#34;</span> <span style=color:#f92672>+</span> users<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>position<span style=color:#f92672>).</span><span style=color:#a6e22e>getFirstName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> <span style=color:#f92672>+</span> users<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>position<span style=color:#f92672>).</span><span style=color:#a6e22e>getLastName</span><span style=color:#f92672>());</span> <span style=color:#75715e>// Setting text to TextView
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        holder<span style=color:#f92672>.</span><span style=color:#a6e22e>userId</span><span style=color:#f92672>.</span><span style=color:#a6e22e>setText</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;My ID: &#34;</span> <span style=color:#f92672>+</span> users<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>position<span style=color:#f92672>).</span><span style=color:#a6e22e>getUserId</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getItemCount</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// RecyclerView wants to know the count of items in the list
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>users</span><span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyViewHolder</span> <span style=color:#66d9ef>extends</span> RecyclerView<span style=color:#f92672>.</span><span style=color:#a6e22e>ViewHolder</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// grabbing views from our custom_row layout file, 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// similar what we normally do in onCreate method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        ImageView userImage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        TextView userFullName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        TextView userId<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>MyViewHolder</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@NonNull</span> View itemView<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>itemView<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            userImage <span style=color:#f92672>=</span> itemView<span style=color:#f92672>.</span><span style=color:#a6e22e>findViewById</span><span style=color:#f92672>(</span>R<span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>.</span><span style=color:#a6e22e>userImage</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            userFullName <span style=color:#f92672>=</span> itemView<span style=color:#f92672>.</span><span style=color:#a6e22e>findViewById</span><span style=color:#f92672>(</span>R<span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>.</span><span style=color:#a6e22e>fullNameText</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            userId <span style=color:#f92672>=</span> itemView<span style=color:#f92672>.</span><span style=color:#a6e22e>findViewById</span><span style=color:#f92672>(</span>R<span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>.</span><span style=color:#a6e22e>userId</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><em><strong>ProcessImage.java</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This class is responsible for processing an image, 
</span></span></span><span style=display:flex><span><span style=color:#75715e>// converting from url to bitmap and storing it to the local cache
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProcessImage</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    String imageUrl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> key<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;</span> memoryCache<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ProcessImage</span><span style=color:#f92672>(</span>String imageUrl<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>imageUrl</span> <span style=color:#f92672>=</span> imageUrl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getImageUrl</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> imageUrl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// This function takes image url and converts it to bitmap,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// after that it stores it to the cache in key-value pair format, 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// with a key being the item position in recyclerView
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span>  Bitmap <span style=color:#a6e22e>getBitmapFromURL</span><span style=color:#f92672>(</span>String src<span style=color:#f92672>,</span> LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;</span> memoryCache<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> key<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            CacheImages cacheImage <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> CacheImages<span style=color:#f92672>(</span>memoryCache<span style=color:#f92672>,</span> key<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Retrieves the cache by providing the key value.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            Bitmap myBitmap <span style=color:#f92672>=</span> cacheImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getBitmapFromMemCache</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>cacheImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getKey</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>myBitmap <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                Log<span style=color:#f92672>.</span><span style=color:#a6e22e>d</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;cached&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Got the cached content&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// if the cache is not null, return the cache content
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>return</span>  myBitmap<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// if the cache for that key is null, get the image from server, 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#75715e>// convert to bitmap and return it.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#75715e>// Credits to @silentnuke: https://stackoverflow.com/a/8993175/7686275
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                URL url <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URL<span style=color:#f92672>(</span>src<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                HttpURLConnection connection <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpURLConnection<span style=color:#f92672>)</span> url<span style=color:#f92672>.</span><span style=color:#a6e22e>openConnection</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                connection<span style=color:#f92672>.</span><span style=color:#a6e22e>setDoInput</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                connection<span style=color:#f92672>.</span><span style=color:#a6e22e>connect</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                InputStream input <span style=color:#f92672>=</span> connection<span style=color:#f92672>.</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                myBitmap <span style=color:#f92672>=</span> BitmapFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>decodeStream</span><span style=color:#f92672>(</span>input<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                cacheImage<span style=color:#f92672>.</span><span style=color:#a6e22e>addBitmapToMemoryCache</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>cacheImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getKey</span><span style=color:#f92672>()),</span> myBitmap<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> myBitmap<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Log exception
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><em><strong>CacheImages.java</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This class is responsible for caching
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CacheImages</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;</span> memoryCache<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> key<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getMemoryCache</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> memoryCache<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getKey</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> key<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>CacheImages</span><span style=color:#f92672>(</span>LruCache<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Bitmap<span style=color:#f92672>&gt;</span> memoryCache<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> key<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>memoryCache</span> <span style=color:#f92672>=</span> memoryCache<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>key</span> <span style=color:#f92672>=</span> key<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>addBitmapToMemoryCache</span><span style=color:#f92672>(</span>String key<span style=color:#f92672>,</span> Bitmap bitmap<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// if bitmap doesn&#39;t exist in cache, store that bitmap to cache
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>getBitmapFromMemCache<span style=color:#f92672>(</span>key<span style=color:#f92672>)</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            memoryCache<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>key<span style=color:#f92672>,</span> bitmap<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Bitmap <span style=color:#a6e22e>getBitmapFromMemCache</span><span style=color:#f92672>(</span>String key<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> memoryCache<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>key<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><em><strong><a href=https://github.com/akrvs21/android-projects/tree/main/Concurrency%20and%20Caching%20in%20RecyclerView>FULL CODE</a></strong></em></p></div><footer class=post-footer>
<ul class=post-tags>
<li><a href=https://akrvs21.github.io/tags/recyclerview/>RecyclerView</a></li><li><a href=https://akrvs21.github.io/tags/thread/>Thread</a></li><li><a href=https://akrvs21.github.io/tags/cache-memory/>Cache memory</a></li><li><a href=https://akrvs21.github.io/tags/lrucache/>LruCache</a></li></ul><nav class=paginav>
<a class=next href=https://akrvs21.github.io/posts/recyclerview/>
<span class=title>Next Page »</span>
<br>
<span>How to populate RecyclerView with data from server in Android</span>
</a>
</nav><div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android on twitter" href="https://twitter.com/intent/tweet/?text=How%20to%20load%20and%20cache%20images%20from%20URL%20to%20RecyclerView%20without%20using%203rd%20party%20libraries%20in%20Android&url=https%3a%2f%2fakrvs21.github.io%2fposts%2fasync_recycler_view%2f&hashtags=RecyclerView%2cThread%2cCachememory%2cLruCache"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fakrvs21.github.io%2fposts%2fasync_recycler_view%2f&title=How%20to%20load%20and%20cache%20images%20from%20URL%20to%20RecyclerView%20without%20using%203rd%20party%20libraries%20in%20Android&summary=How%20to%20load%20and%20cache%20images%20from%20URL%20to%20RecyclerView%20without%20using%203rd%20party%20libraries%20in%20Android&source=https%3a%2f%2fakrvs21.github.io%2fposts%2fasync_recycler_view%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fakrvs21.github.io%2fposts%2fasync_recycler_view%2f&title=How%20to%20load%20and%20cache%20images%20from%20URL%20to%20RecyclerView%20without%20using%203rd%20party%20libraries%20in%20Android"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fakrvs21.github.io%2fposts%2fasync_recycler_view%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android on whatsapp" href="https://api.whatsapp.com/send?text=How%20to%20load%20and%20cache%20images%20from%20URL%20to%20RecyclerView%20without%20using%203rd%20party%20libraries%20in%20Android%20-%20https%3a%2f%2fakrvs21.github.io%2fposts%2fasync_recycler_view%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share How to load and cache images from URL to RecyclerView without using 3rd party libraries in Android on telegram" href="https://telegram.me/share/url?text=How%20to%20load%20and%20cache%20images%20from%20URL%20to%20RecyclerView%20without%20using%203rd%20party%20libraries%20in%20Android&url=https%3a%2f%2fakrvs21.github.io%2fposts%2fasync_recycler_view%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div></footer></article></main><footer class=footer>
<span>&copy; 2022 <a href=https://akrvs21.github.io/>Personal Blog - NSA</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script>
</body></html>